!function(d){var c=function(i,j){this.options=d.extend({},d.fn.bfhphone.defaults,j);this.$element=d(i);if(this.$element.is('input[type="text"]')||this.$element.is('input[type="tel"]')){var a=this.options.country;var b=this.$element.closest("form");if(a!=""){var h=b.find("#"+a);if(h.length!=0){this.options.format=BFHPhoneFormatList[h.val()]}else{this.options.format=BFHPhoneFormatList[a]}}this.addFormatter()}if(this.$element.is("span")){this.displayFormatter()}};c.prototype={constructor:c,getFormattedNumber:function(){var b=this.options.format;var k=new String(this.options.number);var a="";var i="";for(var j=0;j<k.length;j++){if(/[0-9]/.test(k.charAt(j))){i+=k.charAt(j)}}k=i;var l=0;for(var j=0;j<b.length;j++){if(/[0-9]/.test(b.charAt(j))){if(b.charAt(j)==k.charAt(l)){a+=k.charAt(l);l++}else{a+=b.charAt(j)}}else{if(b.charAt(j)!="d"){if(k.charAt(l)!=""||b.charAt(j)=="+"){a+=b.charAt(j)}}else{if(k.charAt(l)==""){a+=""}else{a+=k.charAt(l);l++}}}}return a},addFormatter:function(){var a=this.getFormattedNumber();this.$element.addClass("disabled");this.$element.val(a);this.$element.removeClass("disabled")},displayFormatter:function(){var a=this.getFormattedNumber();this.$element.html(a)},changeCountry:function(a){var b=d(this);var e=d(this).data("bfhphone");e.options.format=BFHPhoneFormatList[b.val()];e.addFormatter()},change:function(e){var b;b=d(this).data("bfhphone");if(b.$element.is(".disabled, :disabled")){return false}var u=b.$element[0].selectionStart,s=b.$element[0].selectionEnd;if(!u&&!s&&b.$element[0].createTextRange){var i=document.selection.createRange();if(i&&i.parentElement()==b.$element[0]){var a=b.$element[0].createTextRange();a.moveToBookmark(i.getBookmark());var r=b.$element[0].createTextRange();r.collapse(false);if(a.compareEndPoints("StartToEnd",r)>-1){u=s=b.$element.val().length}else{u=-a.moveStart("character",-b.$element.val().length);if(a.compareEndPoints("EndToEnd",r)>-1){s=b.$element.val().length}else{s=-a.moveEnd("character",-b.$element.val().length)}}}}var v=false;if(u==b.$element.val().length){v=true}var t=b.$element.val();var p="";for(var q=0;q<t.length;q++){if(/[0-9]/.test(t.charAt(q))){p+=t.charAt(q)}}b.options.number=p;b.addFormatter();b.$element.data("number",b.options.number);if(v){u=b.$element.val().length;s=b.$element.val().length}if(b.$element[0].setSelectionRange){b.$element[0].setSelectionRange(u,s)}else{if(b.$element[0].createTextRange){var i=b.$element[0].createTextRange();i.collapse(true);i.moveEnd("character",s);i.moveStart("character",u);i.select()}}return false}};d.fn.bfhphone=function(a){return this.each(function(){var b=d(this),g=b.data("bfhphone"),h=typeof a=="object"&&a;if(!g){b.data("bfhphone",(g=new c(this,h)))}if(typeof a=="string"){g[a]()}})};d.fn.bfhphone.Constructor=c;d.fn.bfhphone.defaults={format:"",number:"",country:""};d(window).on("load",function(){d('form input[type="text"].bfh-phone, form input[type="tel"].bfh-phone, span.bfh-phone').each(function(){var a=d(this);F;a.bfhphone(a.data())})});d(function(){d("body").on("propertychange.bfhphone.data-api change.bfhphone.data-api input.bfhphone.data-api keyup.bfhphone.data-api",".bfh-phone",c.prototype.change).on("change.bfhphone.data-api",".bfh-country",c.prototype.changeCountry)})}(window.jQuery);